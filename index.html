<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>مولد المنشورات الدينية لتيليجرام</title>
  
  <!-- TailwindCSS for styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Font (Cairo) for Arabic text -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  
  <!-- React Libraries -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  
  <!-- Babel to translate JSX in the browser -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    body { font-family: 'Cairo', sans-serif; }
    .spinner {
      border: 4px solid rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      border-top-color: #3498db;
      width: 40px;
      height: 40px;
      animation: spin 1s ease-in-out infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #1f2937; }
    ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 10px; }
    ::-webkit-scrollbar-thumb:hover { background: #6b7280; }
  </style>
</head>
<body class="bg-gray-900 text-white">
  
  <div id="root"></div>

  <!-- All application logic is now inside this single script tag -->
  <script type="text/babel">
    const { useState, useCallback } = React;

    // --- SVG Icons ---
    const SparklesIcon = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="mr-2 h-5 w-5"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/><path d="M18 9h.01"/><path d="M15 6h.01"/><path d="M21 12h.01"/><path d="M12 21a6 6 0 0 0-9-9 9 9 0 1 1 9 9Z"/><path d="M6 9h.01"/><path d="M9 6h.01"/><path d="M3 12h.01"/></svg>
    );
    const CopyIcon = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="mr-2 h-5 w-5"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
    );
    const CheckIcon = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="mr-2 h-5 w-5"><polyline points="20 6 9 17 4 12"/></svg>
    );

    // --- Main App Component ---
    const App = () => {
      const [topic, setTopic] = useState('الصبر عند الشدائد');
      const [tone, setTone] = useState('مؤثر وملهم');
      const [generatedPost, setGeneratedPost] = useState('');
      const [isLoading, setIsLoading] = useState(false);
      const [error, setError] = useState('');
      const [copied, setCopied] = useState(false);

      const handleGeneratePost = useCallback(async () => {
        const apiKey = "AIzaSyArzo5NQ9LTznK1UwuyNwEinnfho-zRBlo";

        if (!topic) {
          setError('الرجاء إدخال موضوع للمنشور.');
          return;
        }
        setIsLoading(true);
        setError('');
        setGeneratedPost('');
        setCopied(false);
        
        try {
          const { GoogleGenerativeAI } = await import("https://esm.sh/@google/generative-ai");
          const genAI = new GoogleGenerativeAI(apiKey);
          const model = genAI.getGenerativeModel({ model: "gemini-2.5-flash-preview-05-20" });

          const prompt = `
            مهمتك هي كتابة منشور ديني إسلامي قصير ومؤثر، مناسب للنشر على منصات مثل تيليجرام وفيسبوك.
            **الموضوع:** ${topic}
            **الأسلوب:** ${tone}
            **إرشادات:**
            1. يجب أن يكون المنشور باللغة العربية الفصحى المبسطة.
            2. ابدأ بآية قرآنية أو حديث نبوي شريف (مع التخريج إن أمكن) يتعلق بالموضوع.
            3. أضف شرحًا قصيرًا أو خاطرة إيمانية تعزز المعنى.
            4. اختتم بدعاء مناسب أو تذكير لطيف.
            5. استخدم بعض الرموز التعبيرية (Emojis) المناسبة بشكل معتدل لزيادة الجاذبية.
            6. يجب أن يكون النص النهائي قصيرًا ومناسبًا للقراءة السريعة على الجوال.
          `;

          const result = await model.generateContent(prompt);
          const response = await result.response;
          const text = response.text();
          setGeneratedPost(text);
        } catch (err) {
          console.error("Error generating post:", err);
          setError('حدث خطأ أثناء إنشاء المنشور. تأكد من أن مفتاح API صحيح وأن اتصالك بالإنترنت جيد.');
        } finally {
          setIsLoading(false);
        }
      }, [topic, tone]);

      const handleCopyText = () => {
        if (generatedPost) {
          navigator.clipboard.writeText(generatedPost).then(() => {
            setCopied(true);
            setTimeout(() => setCopied(false), 2000);
          }).catch(err => console.error('Failed to copy: ', err));
        }
      };

      return (
        <div className="min-h-screen bg-gray-900 text-white flex flex-col items-center p-4 sm:p-6 md:p-8">
          <div className="w-full max-w-3xl mx-auto">
            <header className="text-center mb-8">
              <h1 className="text-4xl sm:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-emerald-500 mb-2">
                مولد المنشورات الدينية
              </h1>
              <p className="text-lg text-gray-400">
                أنشئ منشورات إيمانية مؤثرة لتيليجرام بلمسة زر
              </p>
            </header>

            <div className="bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-700 mb-8">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label htmlFor="topic" className="block text-sm font-medium text-gray-300 mb-2">موضوع المنشور</label>
                  <input type="text" id="topic" value={topic} onChange={(e) => setTopic(e.target.value)} placeholder="مثال: فضل الصلاة على النبي" className="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white placeholder-gray-500 focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition duration-200" />
                </div>
                <div>
                  <label htmlFor="tone" className="block text-sm font-medium text-gray-300 mb-2">اختر الأسلوب</label>
                  <select id="tone" value={tone} onChange={(e) => setTone(e.target.value)} className="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition duration-200">
                    <option>مؤثر وملهم</option>
                    <option>تحفيزي ومشجع</option>
                    <option>تذكير لطيف</option>
                    <option>قصة وعبرة</option>
                    <option>دعاء وابتهال</option>
                  </select>
                </div>
              </div>
              <button onClick={handleGeneratePost} disabled={isLoading} className="w-full mt-6 bg-gradient-to-r from-sky-500 to-emerald-600 hover:from-sky-600 hover:to-emerald-700 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105">
                {isLoading ? (<div className="spinner h-6 w-6 border-2"></div>) : (<><SparklesIcon /><span>إنشاء المنشور الآن</span></>)}
              </button>
            </div>

            {error && <div className="bg-red-900/50 border border-red-700 text-red-300 p-4 rounded-lg mb-6 text-center">{error}</div>}

            {(isLoading || generatedPost) && (
              <div className="bg-gray-800/50 border border-gray-700 rounded-2xl p-6 shadow-lg min-h-[200px] flex flex-col justify-center items-center">
                {isLoading ? (
                  <div className="text-center">
                     <div className="spinner mx-auto mb-4"></div>
                     <p className="text-gray-400">لحظات... يتم إعداد منشورك الإيماني</p>
                  </div>
                ) : (
                  <div className="w-full text-right">
                    <h2 className="text-2xl font-bold mb-4 text-sky-400">المنشور المُنشأ</h2>
                    <div className="prose prose-invert max-w-none text-white whitespace-pre-wrap leading-relaxed text-lg" dangerouslySetInnerHTML={{ __html: generatedPost.replace(/\n/g, '<br />') }}></div>
                    <button onClick={handleCopyText} className={`w-full mt-6 ${copied ? 'bg-green-600' : 'bg-gray-700 hover:bg-gray-600'} text-white font-semibold py-2.5 px-4 rounded-lg flex items-center justify-center transition-all duration-300`}>
                      {copied ? <CheckIcon /> : <CopyIcon />}
                      <span>{copied ? 'تم النسخ بنجاح!' : 'نسخ النص'}</span>
                    </button>
                  </div>
                )}
              </div>
            )}
          </div>
        </div>
      );
    };

    // Render the app to the DOM
    const container = document.getElementById('root');
    const root = ReactDOM.createRoot(container);
    root.render(<App />);
  </script>

</body>
</html>


